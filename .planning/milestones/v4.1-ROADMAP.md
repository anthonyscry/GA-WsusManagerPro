# Milestone v4.1: Bug Fixes & Polish

**Status:** SHIPPED 2026-02-20
**Phases:** 8-11
**Total Plans:** 4

## Overview

Get the v4.0 C# rewrite launching, looking right, and with core operations working reliably on a real WSUS server. Retargeted from .NET 9 to .NET 8, fixed UI bugs, fixed 5 critical service bugs, and hardened stability.

## Phases

### Phase 8: Build Compatibility

**Goal**: The app builds, publishes, and runs as a single-file EXE using the .NET 8 SDK
**Depends on**: Nothing
**Plans**: 1 plan

Plans:
- [x] 08-01: Retarget to .NET 8 — fix csproj, CI workflow, test paths

**Details:**
- Retargeted all 3 projects from net9.0-windows to net8.0-windows
- Downgraded Microsoft.Extensions.* packages from 9.0.* to 8.0.*
- Fixed hardcoded net9.0-windows path in ExeValidationTests.cs
- Updated CI/CD workflow to use .NET 8 SDK (8.0.x)

### Phase 9: Launch and UI Verification

**Goal**: The application presents a correct, fully-functional UI from startup through all navigation panels
**Depends on**: Phase 8
**Plans**: 1 plan

Plans:
- [x] 09-01: Fix duplicate startup message, add active nav button highlighting

**Details:**
- Removed pre-refresh "WSUS not installed" block that fired spuriously on every launch
- Added DataTrigger-based active nav button highlighting (blue left border accent)
- Verified all StaticResource keys present in DarkTheme.xaml
- Confirmed graceful degradation when WSUS not installed

### Phase 10: Core Operations

**Goal**: Every core WSUS management operation executes to completion against a real WSUS server
**Depends on**: Phase 9
**Plans**: 1 plan

Plans:
- [x] 10-01: Fix 5 bugs in health check, sync, and cleanup services

**Details:**
- BUG-08: DeepCleanupService Step 4 passed GUID to spDeleteUpdate (expects INT) — all deletes failed silently
- BUG-04: WsusServerService.ApproveUpdatesAsync wrong reflection path — zero approvals
- BUG-03: WsusServerService.DeclineUpdatesAsync declined by age instead of expired/superseded
- BUG-01: HealthService called appcmd without full path — failed on servers where IIS not in PATH
- BUG-05: WsusServerService sync progress (int) cast on boxed long — killed progress reporting

### Phase 11: Stability Hardening

**Goal**: The application handles edge cases and error conditions without crashing
**Depends on**: Phase 10
**Plans**: 1 plan

Plans:
- [x] 11-01: Add CanExecute refresh for proper button disabling during operations

**Details:**
- STAB-01 and STAB-02 already met (exception handlers, cancel/process kill)
- Fixed STAB-03: Added NotifyCommandCanExecuteChanged() calls at operation start/end
- All 15+ operation buttons now visually disable during operations

---

## Milestone Summary

**Key Decisions:**
- Retarget from .NET 9 to .NET 8 LTS (dev machine SDK availability)
- No new features — pure bug fix and validation milestone

**Issues Resolved:**
- App wouldn't build on dev machine (.NET 8 SDK only)
- 5 silent failures in core operations (would have failed on real WSUS server)
- Buttons appeared clickable during operations (visual feedback gap)
- Duplicate startup message on every launch

**Technical Debt Incurred:**
- None

---
_For current project status, see .planning/ROADMAP.md_
