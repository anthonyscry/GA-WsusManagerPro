---
phase: 28-settings-expansion
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/WsusManager.Core/Models/AppSettings.cs
autonomous: true
requirements:
  - UX-06

must_haves:
  truths:
    - "AppSettings class contains all 8 new properties with default values"
    - "Enums created for DefaultSyncProfile, LogLevel, DashboardRefreshInterval"
    - "JSON serialization correctly handles all properties with camelCase names"
    - "All properties have XML documentation comments"
  artifacts:
    - path: "src/WsusManager.Core/Models/AppSettings.cs"
      provides: "Extended settings model with 8 new properties"
      exports: ["DefaultSyncProfile", "LogLevel", "LogRetentionDays", "LogMaxFileSizeMb", "PersistWindowState", "DashboardRefreshInterval", "RequireConfirmationDestructive", "WinRMTimeoutSeconds", "WinRMRetryCount"]
    - path: "src/WsusManager.Core/Models/DefaultSyncProfile.cs"
      provides: "Enum for sync profile selection"
      contains: "enum DefaultSyncProfile"
    - path: "src/WsusManager.Core/Models/LogLevel.cs"
      provides: "Enum for log level selection"
      contains: "enum LogLevel"
    - path: "src/WsusManager.Core/Models/DashboardRefreshInterval.cs"
      provides: "Enum for dashboard refresh interval"
      contains: "enum DashboardRefreshInterval"
  key_links:
    - from: "AppSettings"
      to: "DefaultSyncProfile, LogLevel, DashboardRefreshInterval"
      via: "enum property types"
      pattern: "property type references"
---

<objective>
Extend AppSettings model with 8 new configurable settings across 4 categories. Create supporting enums for type-safe values. Ensure JSON serialization works correctly for persistence.

Purpose: Settings dialog needs more options to control application behavior. Adding these properties to AppSettings enables persistence and type-safe access throughout the application.

Output: AppSettings.cs with 8 new properties, 3 new enum files, all with proper documentation.
</objective>

<execution_context>
@/home/anthonyscry/.claude/get-shit-done/workflows/execute-plan.md
@/home/anthonyscry/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/STATE.md
@.planning/phases/28-settings-expansion/28-CONTEXT.md
@src/WsusManager.Core/Models/AppSettings.cs
@src/WsusManager.Core/Models/SyncProfile.cs
</context>

<tasks>

<task type="auto">
  <name>Create DefaultSyncProfile enum</name>
  <files>src/WsusManager.Core/Models/DefaultSyncProfile.cs</files>
  <action>
    Create a new enum file src/WsusManager.Core/Models/DefaultSyncProfile.cs:

    ```csharp
    namespace WsusManager.Core.Models;

    /// <summary>
    /// Default sync profile selection for Online Sync operations.
    /// Used as the preset choice when opening the Online Sync dialog.
    /// </summary>
    public enum DefaultSyncProfile
    {
        /// <summary>Full Sync: synchronize, decline superseded, approve, monitor.</summary>
        Full,

        /// <summary>Quick Sync: synchronize, approve (skip decline).</summary>
        Quick,

        /// <summary>Sync Only: synchronize metadata only, no approval changes.</summary>
        SyncOnly
    }
    ```

    DO NOT: Duplicate the existing SyncProfile enum - this is specifically for the default setting
  </action>
  <verify>
    dotnet build src/WsusManager.Core/WsusManager.Core.csproj succeeds
  </verify>
  <done>
    DefaultSyncProfile.cs exists with 3 values (Full, Quick, SyncOnly) and XML documentation
  </done>
</task>

<task type="auto">
  <name>Create LogLevel enum</name>
  <files>src/WsusManager.Core/Models/LogLevel.cs</files>
  <action>
    Create a new enum file src/WsusManager.Core/Models/LogLevel.cs:

    ```csharp
    namespace WsusManager.Core.Models;

    /// <summary>
    /// Logging level for application output. Controls which messages
    /// are written to the log panel and log file.
    /// </summary>
    public enum LogLevel
    {
        /// <summary>Detailed debugging information (verbose).</summary>
        Debug,

        /// <summary>General informational messages (default).</summary>
        Info,

        /// <summary>Warning messages for potential issues.</summary>
        Warning,

        /// <summary>Error messages for failures.</summary>
        Error,

        /// <summary>Critical errors that cause operation failure.</summary>
        Fatal
    }
    ```

    DO NOT: Use Serilog levels - keep it simple for this phase
  </action>
  <verify>
    dotnet build src/WsusManager.Core/WsusManager.Core.csproj succeeds
  </verify>
  <done>
    LogLevel.cs exists with 5 values (Debug, Info, Warning, Error, Fatal) and XML documentation
  </done>
</task>

<task type="auto">
  <name>Create DashboardRefreshInterval enum</name>
  <files>src/WsusManager.Core/Models/DashboardRefreshInterval.cs</files>
  <action>
    Create a new enum file src/WsusManager.Core/Models/DashboardRefreshInterval.cs:

    ```csharp
    namespace WsusManager.Core.Models;

    /// <summary>
    /// Dashboard auto-refresh interval. Controls how often the dashboard
    /// data is refreshed from the WSUS server.
    /// </summary>
    public enum DashboardRefreshInterval
    {
        /// <summary>Refresh every 10 seconds.</summary>
        Sec10,

        /// <summary>Refresh every 30 seconds (default).</summary>
        Sec30,

        /// <summary>Refresh every 60 seconds.</summary>
        Sec60,

        /// <summary>Disable auto-refresh (manual only).</summary>
        Disabled
    }
    ```

    DO NOT: Add custom intervals - these 4 options cover all common use cases
  </action>
  <verify>
    dotnet build src/WsusManager.Core/WsusManager.Core.csproj succeeds
  </verify>
  <done>
    DashboardRefreshInterval.cs exists with 4 values (Sec10, Sec30, Sec60, Disabled) and XML documentation
  </done>
</task>

<task type="auto">
  <name>Extend AppSettings with new properties</name>
  <files>src/WsusManager.Core/Models/AppSettings.cs</files>
  <action>
    Update src/WsusManager.Core/Models/AppSettings.cs to add 8 new properties:

    1. Add using statement for JsonSerialization if not present

    2. Add these properties after existing ones (maintaining alphabetical order within sections):

    ```csharp
    // Operations
    /// <summary>Default sync profile for Online Sync dialog.</summary>
    [JsonPropertyName("defaultSyncProfile")]
    public DefaultSyncProfile DefaultSyncProfile { get; set; } = DefaultSyncProfile.Full;

    // Logging
    /// <summary>Minimum log level to output.</summary>
    [JsonPropertyName("logLevel")]
    public LogLevel LogLevel { get; set; } = LogLevel.Info;

    /// <summary>Number of days to retain log files (1-365).</summary>
    [JsonPropertyName("logRetentionDays")]
    public int LogRetentionDays { get; set; } = 30;

    /// <summary>Maximum log file size in MB before rotation (1-1000).</summary>
    [JsonPropertyName("logMaxFileSizeMb")]
    public int LogMaxFileSizeMb { get; set; } = 10;

    // Behavior
    /// <summary>Whether to save and restore window position and size.</summary>
    [JsonPropertyName("persistWindowState")]
    public bool PersistWindowState { get; set; } = true;

    /// <summary>Dashboard auto-refresh interval.</summary>
    [JsonPropertyName("dashboardRefreshInterval")]
    public DashboardRefreshInterval DashboardRefreshInterval { get; set; } = DashboardRefreshInterval.Sec30;

    /// <summary>Whether to show confirmation prompts for destructive operations.</summary>
    [JsonPropertyName("requireConfirmationDestructive")]
    public bool RequireConfirmationDestructive { get; set; } = true;

    // Advanced
    /// <summary>WinRM operation timeout in seconds (10-300).</summary>
    [JsonPropertyName("winRMTimeoutSeconds")]
    public int WinRMTimeoutSeconds { get; set; } = 60;

    /// <summary>WinRM operation retry count (1-10).</summary>
    [JsonPropertyName("winRMRetryCount")]
    public int WinRMRetryCount { get; set; } = 3;
    ```

    3. Add region comments to organize properties:
       - // ═══════════════════════════════════════════════════════════════
       - // EXISTING SETTINGS
       - // ═══════════════════════════════════════════════════════════════
       - // ═══════════════════════════════════════════════════════════════
       - // OPERATIONS SETTINGS
       - // ═══════════════════════════════════════════════════════════════
       - // etc.

    DO NOT: Remove or change existing properties - only add new ones
  </action>
  <verify>
    dotnet build src/WsusManager.Core/WsusManager.Core.csproj succeeds
  </verify>
  <done>
    AppSettings.cs contains 8 new properties with JsonPropertyName attributes, default values match CONTEXT.md, organized with region comments
  </done>
</task>

</tasks>

<verification>
1. Build succeeds: dotnet build src/WsusManager.Core
2. All 3 enum files exist with correct values
3. AppSettings has 8 new properties with correct types
4. All properties have JsonPropertyName attributes for camelCase JSON
5. Default values match CONTEXT.md specifications
6. All properties have XML documentation comments
</verification>

<success_criteria>
AppSettings model extended with 8 new properties and 3 supporting enums. JSON serialization configured correctly. All properties have sensible defaults and documentation.
</success_criteria>

<output>
After completion, create `.planning/phases/28-settings-expansion/28-01-SUMMARY.md`
</output>
