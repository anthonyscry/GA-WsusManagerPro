---
phase: 29-data-filtering
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/WsusManager.App/Views/MainWindow.xaml
  - src/WsusManager.App/ViewModels/MainViewModel.cs
  - src/WsusManager.App/Themes/SharedStyles.xaml
  - src/WsusManager.Core/Models/AppSettings.cs
  - src/WsusManager.Tests/ViewModels/MainViewModelTests.cs
autonomous: true
requirements:
  - DAT-01

must_haves:
  truths:
    - "Computers panel shows filter ComboBox (All/Online/Offline/Error) above the ListBox"
    - "Computers panel shows search TextBox with magnifying glass icon placeholder"
    - "Search uses 300ms debounce timer for real-time filtering"
    - "Filter ComboBox immediately filters when selection changes (no Apply button)"
    - "Filters use CollectionView.GetDefaultView().Filter for efficient O(n) filtering"
    - "Empty state shows 'No items match your current filters' when filter results empty"
    - "Clear filters button appears only when filters are active"
  artifacts:
    - path: "src/WsusManager.App/Views/MainWindow.xaml"
      provides: "Computers panel filter UI (status ComboBox, search TextBox, clear button)"
      contains: "FilterStatusComboBox, ComputerSearchTextBox, ClearComputerFiltersButton"
    - path: "src/WsusManager.App/ViewModels/MainViewModel.cs"
      provides: "Filter properties, debounce timer, CollectionView filter logic"
      contains: "ComputerStatusFilter, ComputerSearchText, _searchDebounceTimer"
    - path: "src/WsusManager.Core/Models/AppSettings.cs"
      provides: "Filter persistence properties"
      contains: "ComputerStatusFilter, ComputerSearchText"
    - path: "src/WsusManager.App/Themes/SharedStyles.xaml"
      provides: "FilterRow style for consistent filter control layout"
      contains: "FilterRow, FilterComboBox, FilterSearchBox styles"
  key_links:
    - from: "ComputerStatusFilter property"
      to: "AppSettings.ComputerStatusFilter"
      via: "settings persistence on property change"
      pattern: "settings save"
    - from: "ComputerSearchText property"
      to: "_searchDebounceTimer"
      via: "DispatcherTimer reset on each keystroke"
      pattern: "debounce pattern"
    - from: "Filter controls"
      to: "CollectionView.GetDefaultView(FilteredComputers).Filter"
      via: "Refresh() call on filter change"
      pattern: "CollectionView filtering"
---

<objective>
Add filter UI controls to the Computers panel with status filter dropdown, real-time search box with 300ms debounce, CollectionView-based filtering logic, and filter persistence to AppSettings. Filters work instantly without an Apply button, and show clear empty state when no items match.

Purpose: Users need to quickly find computers by status (Online/Offline/Error) or search by hostname/IP address. Real-time filtering with debounce provides responsive search without UI flickering. CollectionView filtering is efficient for large lists (<2000 items).

Output: Computers panel with filter row (status ComboBox + search TextBox + clear button), working filters with CollectionView logic, debounce timer, filter persistence, empty state UI, and unit tests.
</objective>

<execution_context>
@/home/anthonyscry/.claude/get-shit-done/workflows/execute-plan.md
@/home/anthonyscry/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/STATE.md
@.planning/phases/29-data-filtering/29-CONTEXT.md
@src/WsusManager.App/Views/MainWindow.xaml
@src/WsusManager.App/ViewModels/MainViewModel.cs
@src/WsusManager.Core/Models/AppSettings.cs
@src/WsusManager.App/Themes/SharedStyles.xaml
</context>

<tasks>

<task type="auto">
  <name>Add filter styles to SharedStyles.xaml</name>
  <files>src/WsusManager.App/Themes/SharedStyles.xaml</files>
  <action>
    Add filter control styles to src/WsusManager.App/Themes/SharedStyles.xaml:

    ```xml
    <!-- ═══════════════════════════════════════════════════════════
         FILTER STYLES (Phase 29)
         ═══════════════════════════════════════════════════════════ -->

    <!-- Filter row container: horizontal layout with 8px spacing -->
    <Style x:Key="FilterRow" TargetType="StackPanel">
        <Setter Property="Orientation" Value="Horizontal"/>
        <Setter Property="Margin" Value="0,0,0,12"/>
    </Style>

    <!-- Filter ComboBox: same styling as regular ComboBox but with auto width -->
    <Style x:Key="FilterComboBox" TargetType="ComboBox" BasedOn="{StaticResource {x:Type ComboBox}}">
        <Setter Property="Padding" Value="8,6"/>
        <Setter Property="FontSize" Value="12"/>
        <Setter Property="MinWidth" Value="100"/>
    </Style>

    <!-- Filter SearchBox: TextBox with search icon placeholder -->
    <Style x:Key="FilterSearchBox" TargetType="TextBox" BasedOn="{StaticResource {x:Type TextBox}}">
        <Setter Property="Width" Value="200"/>
        <Setter Property="Padding" Value="8,6"/>
        <Setter Property="FontSize" Value="12"/>
        <Setter Property="VerticalAlignment" Value="Center"/>
    </Style>

    <!-- Clear Filters Button: small secondary button -->
    <Style x:Key="ClearFiltersButton" TargetType="Button" BasedOn="{StaticResource BtnSec}">
        <Setter Property="Padding" Value="12,6"/>
        <Setter Property="FontSize" Value="11"/>
        <Setter Property="Margin" Value="8,0,0,0"/>
        <Setter Property="VerticalAlignment" Value="Center"/>
    </Style>

    <!-- Empty State TextBlock: centered message when no items match -->
    <Style x:Key="EmptyStateText" TargetType="TextBlock">
        <Setter Property="Foreground" Value="{DynamicResource TextMuted}"/>
        <Setter Property="FontSize" Value="13"/>
        <Setter Property="HorizontalAlignment" Value="Center"/>
        <Setter Property="VerticalAlignment" Value="Center"/>
        <Setter Property="Margin" Value="0,40,0,0"/>
    </Style>
    ```

    DO NOT: Create new colors - reuse existing theme resources
  </action>
  <verify>
    dotnet build src/WsusManager.App succeeds
  </verify>
  <done>
    SharedStyles.xaml contains FilterRow, FilterComboBox, FilterSearchBox, ClearFiltersButton, and EmptyStateText styles with DynamicResource references
  </done>
</task>

<task type="auto">
  <name>Add filter properties to MainViewModel and AppSettings</name>
  <files>
    src/WsusManager.App/ViewModels/MainViewModel.cs
    src/WsusManager.Core/Models/AppSettings.cs
  </files>
  <action>
    **Step 1a: Add filter persistence to AppSettings.cs**

    Add to src/WsusManager.Core/Models/AppSettings.cs (in the BEHAVIOR SETTINGS section):

    ```csharp
    /// <summary>Last selected status filter for Computers panel.</summary>
    [JsonPropertyName("computerStatusFilter")]
    public string ComputerStatusFilter { get; set; } = "All";

    /// <summary>Last search text for Computers panel.</summary>
    [JsonPropertyName("computerSearchText")]
    public string ComputerSearchText { get; set; } = string.Empty;
    ```

    **Step 1b: Add filter properties to MainViewModel.cs**

    Add to MainViewModel.cs (in the DATA FILTERING section after FilteredComputers):

    ```csharp
    // ═══════════════════════════════════════════════════════════════
    // DATA FILTERING - Computers Panel
    // ═══════════════════════════════════════════════════════════════

    /// <summary>Selected status filter for Computers panel.</summary>
    [ObservableProperty]
    private string _computerStatusFilter = "All";

    /// <summary>Search text for Computers panel (debounced).</summary>
    [ObservableProperty]
    private string _computerSearchText = string.Empty;

    /// <summary>Debounce timer for search input (300ms).</summary>
    private DispatcherTimer? _computerSearchDebounceTimer;

    /// <summary>Whether to show the Clear Filters button (any filter active).</summary>
    public bool ShowClearComputerFilters =>
        !string.Equals(ComputerStatusFilter, "All", StringComparison.Ordinal) ||
        !string.IsNullOrWhiteSpace(ComputerSearchText);

    /// <summary>Number of visible items after filtering.</summary>
    public int ComputerVisibleCount => FilteredComputers.Count;

    /// <summary>Text showing filter count (e.g., "15 of 200 computers visible").</summary>
    public string ComputerFilterCountText =>
        FilteredComputers.Count == ComputerInfo.All.Count
            ? $"{FilteredComputers.Count} computers"
            : $"{FilteredComputers.Count} of {ComputerInfo.All.Count} visible";
    ```

    NOTE: ComputerInfo.All is a placeholder - in a later task we'll populate this from the WSUS API.

    **Step 1c: Add filter change handlers**

    Add to MainViewModel.cs:

    ```csharp
    partial void OnComputerStatusFilterChanged(string value)
    {
        ApplyComputerFilters();
        SaveFilterSettings();
    }

    partial void OnComputerSearchTextChanged(string value)
    {
        // Reset or start debounce timer
        _computerSearchDebounceTimer?.Stop();
        _computerSearchDebounceTimer = new DispatcherTimer
        {
            Interval = TimeSpan.FromMilliseconds(300)
        };
        _computerSearchDebounceTimer.Tick += (s, e) =>
        {
            _computerSearchDebounceTimer?.Stop();
            ApplyComputerFilters();
            SaveFilterSettings();
        };
        _computerSearchDebounceTimer.Start();

        // Update status text to show "(filtering...)"
        if (!string.IsNullOrWhiteSpace(value))
        {
            _logService?.LogDebug("(filtering...)");
        }
    }

    private void ApplyComputerFilters()
    {
        var view = CollectionViewSource.GetDefaultView(FilteredComputers);
        view.Filter = (obj) =>
        {
            if (obj is not ComputerInfo computer) return false;

            // Status filter
            if (!string.Equals(ComputerStatusFilter, "All", StringComparison.Ordinal))
            {
                if (!string.Equals(computer.Status, ComputerStatusFilter, StringComparison.OrdinalIgnoreCase))
                    return false;
            }

            // Search filter (case-insensitive substring)
            if (!string.IsNullOrWhiteSpace(ComputerSearchText))
            {
                var search = ComputerSearchText.ToLowerInvariant();
                var match = computer.Hostname.ToLowerInvariant().Contains(search) ||
                           computer.IpAddress.ToLowerInvariant().Contains(search) ||
                           computer.Status.ToLowerInvariant().Contains(search);
                if (!match) return false;
            }

            return true;
        };
        view.Refresh();

        // Notify UI updates
        OnPropertyChanged(nameof(ShowClearComputerFilters));
        OnPropertyChanged(nameof(ComputerVisibleCount));
        OnPropertyChanged(nameof(ComputerFilterCountText));
    }

    private void SaveFilterSettings()
    {
        _settingsService.UpdateSettings(s =>
        {
            s.ComputerStatusFilter = ComputerStatusFilter;
            s.ComputerSearchText = ComputerSearchText;
        });
    }
    ```

    **Step 1d: Add Clear Filters command**

    Add to MainViewModel.cs:

    ```csharp
    [RelayCommand]
    private void ClearComputerFilters()
    {
        ComputerStatusFilter = "All";
        ComputerSearchText = string.Empty;
        _computerSearchDebounceTimer?.Stop();
        ApplyComputerFilters();
        SaveFilterSettings();
    }
    ```

    DO NOT: Call LoadComputersAsync in this task - that's in a later plan
  </action>
  <verify>
    dotnet build src/WsusManager.App succeeds
    dotnet build src/WsusManager.Core succeeds
  </verify>
  <done>
    AppSettings has ComputerStatusFilter and ComputerSearchText properties with JsonPropertyName attributes. MainViewModel has filter properties, OnComputerStatusFilterChanged, OnComputerSearchTextChanged with 300ms debounce timer, ApplyComputerFilters with CollectionView logic, SaveFilterSettings, and ClearComputerFiltersCommand.
  </done>
</task>

<task type="auto">
  <name>Add filter UI to MainWindow.xaml Computers panel</name>
  <files>src/WsusManager.App/Views/MainWindow.xaml</files>
  <action>
    The Computers panel does not exist yet in MainWindow.xaml. Based on the CONTEXT.md, this phase adds filter controls to existing data panels. Since there's no Computers panel currently, we need to check if:

    1. The Computers panel is added in a different phase
    2. OR we create it now as part of this task

    Based on MainWindow.xaml lines 785-797, there's a TODO comment:
    "PHASE 29: Data Filtering - Add virtualized lists here"

    The actual data panel (Computers/Updates) should be added as a new panel. However, looking at the CONTEXT.md more carefully:

    "Add real-time filtering to dashboard panels: Computers panel gets status filter..."

    This implies the Computers panel should already exist or be part of the dashboard. Since it doesn't exist in the current XAML, we'll create a placeholder Computers panel that will be populated in a later task.

    For now, add a placeholder Computers panel in MainWindow.xaml after line 602 (after DatabasePanel) with the filter UI structure:

    ```xml
    <!-- Computers Panel (Phase 29) -->
    <Border x:Name="ComputersPanel"
            automation:AutomationProperties.AutomationId="ComputersPanel"
            Visibility="{Binding IsComputersPanelVisible}">
        <ScrollViewer VerticalScrollBarVisibility="Auto" Padding="16">
            <StackPanel>

                <!-- Filter Row -->
                <StackPanel Style="{StaticResource FilterRow}">
                    <!-- Status Filter -->
                    <TextBlock Text="Status:"
                               Foreground="{DynamicResource TextSecondary}"
                               FontSize="12"
                               VerticalAlignment="Center"
                               Margin="0,0,6,0"/>
                    <ComboBox Style="{StaticResource FilterComboBox}"
                              SelectedItem="{Binding ComputerStatusFilter}"
                              Width="120">
                        <ComboBoxItem Content="All"/>
                        <ComboBoxItem Content="Online"/>
                        <ComboBoxItem Content="Offline"/>
                        <ComboBoxItem Content="Error"/>
                    </ComboBox>

                    <!-- Search Box -->
                    <TextBox Style="{StaticResource FilterSearchBox}"
                             Text="{Binding ComputerSearchText, UpdateSourceTrigger=PropertyChanged}"
                             automation:AutomationProperties.AutomationId="ComputerSearchTextBox"
                             Margin="12,0,0,0">
                        <TextBox.InputBindings>
                            <KeyBinding Key="Escape" Command="{Binding ClearComputerFiltersCommand}"/>
                        </TextBox.InputBindings>
                    </TextBox>

                    <!-- Clear Filters Button -->
                    <Button Content="Clear Filters"
                            Style="{StaticResource ClearFiltersButton}"
                            Command="{Binding ClearComputerFiltersCommand}"
                            Visibility="{Binding ShowClearComputerFilters, Converter={StaticResource BoolToVisibilityConverter}}"
                            automation:AutomationProperties.AutomationId="ClearComputerFiltersButton"/>
                </StackPanel>

                <!-- Filter Count Text -->
                <TextBlock Text="{Binding ComputerFilterCountText}"
                           Foreground="{DynamicResource TextMuted}"
                           FontSize="11"
                           Margin="0,0,0,12"/>

                <!-- Computers ListBox (virtualized) -->
                <Border Background="{DynamicResource InputBackground}"
                        BorderBrush="{DynamicResource BorderPrimary}"
                        BorderThickness="1"
                        CornerRadius="4"
                        MinHeight="300">
                    <ListBox x:Name="ComputersListBox"
                             ItemsSource="{Binding FilteredComputers}"
                             VirtualizingPanel.IsVirtualizing="True"
                             VirtualizingPanel.VirtualizationMode="Recycling"
                             ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                             Background="Transparent"
                            BorderThickness="0"
                             automation:AutomationProperties.AutomationId="ComputersListBox">
                        <ListBox.ItemTemplate>
                            <DataTemplate>
                                <Grid Margin="8,6">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="200"/>
                                        <ColumnDefinition Width="120"/>
                                        <ColumnDefinition Width="100"/>
                                        <ColumnDefinition Width="140"/>
                                        <ColumnDefinition Width="60"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Grid.Column="0" Text="{Binding Hostname}"
                                               Foreground="{DynamicResource TextPrimary}"
                                               FontSize="12"/>
                                    <TextBlock Grid.Column="1" Text="{Binding IpAddress}"
                                               Foreground="{DynamicResource TextSecondary}"
                                               FontSize="12"/>
                                    <TextBlock Grid.Column="2" Text="{Binding Status}">
                                        <TextBlock.Style>
                                            <Style TargetType="TextBlock">
                                                <Setter Property="Foreground" Value="{DynamicResource TextSecondary}"/>
                                                <Style.Triggers>
                                                    <DataTrigger Binding="{Binding Status}" Value="Online">
                                                        <Setter Property="Foreground" Value="{DynamicResource StatusSuccess}"/>
                                                    </DataTrigger>
                                                    <DataTrigger Binding="{Binding Status}" Value="Offline">
                                                        <Setter Property="Foreground" Value="{DynamicResource StatusError}"/>
                                                    </DataTrigger>
                                                    <DataTrigger Binding="{Binding Status}" Value="Error">
                                                        <Setter Property="Foreground" Value="{DynamicResource StatusWarning}"/>
                                                    </DataTrigger>
                                                </Style.Triggers>
                                            </Style>
                                        </TextBlock.Style>
                                    </TextBlock>
                                    <TextBlock Grid.Column="3" Text="{Binding LastSync, StringFormat='{}{0:yyyy-MM-dd HH:mm}'}"
                                               Foreground="{DynamicResource TextSecondary}"
                                               FontSize="12"/>
                                    <TextBlock Grid.Column="4" Text="{Binding PendingUpdates, StringFormat='{}{0} pending'}"
                                               Foreground="{DynamicResource TextSecondary}"
                                               FontSize="12"/>
                                    <TextBlock Grid.Column="5" Text="{Binding OsVersion}"
                                               Foreground="{DynamicResource TextMuted}"
                                               FontSize="11"
                                               TextTrimming="CharacterEllipsis"/>
                                </Grid>
                            </DataTemplate>
                        </ListBox.ItemTemplate>

                        <!-- Empty State -->
                        <ListBox.Style>
                            <Style TargetType="ListBox" BasedOn="{StaticResource {x:Type ListBox}}">
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding FilteredComputers.Count}" Value="0">
                                        <Setter Property="Template">
                                            <Setter.Value>
                                                <ControlTemplate TargetType="ListBox">
                                                    <TextBlock Text="No items match your current filters"
                                                               Style="{StaticResource EmptyStateText}"/>
                                                </ControlTemplate>
                                            </Setter.Value>
                                        </Setter>
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </ListBox.Style>
                    </ListBox>
                </Border>

            </StackPanel>
        </ScrollViewer>
    </Border>
    ```

    Also add the visibility property to MainViewModel.cs:

    ```csharp
    public Visibility IsComputersPanelVisible =>
        string.Equals(CurrentPanel, "Computers", StringComparison.Ordinal)
            ? Visibility.Visible
            : Visibility.Collapsed;
    ```

    And update the Navigate method to handle the Computers panel:

    ```csharp
    OnPropertyChanged(nameof(IsComputersPanelVisible));
    ```

    DO NOT: Add navigation button yet - that's optional for this phase
  </action>
  <verify>
    dotnet build src/WsusManager.App succeeds
    MainWindow.xaml has ComputersPanel with filter row (status ComboBox + search TextBox + clear button), filter count text, and virtualized ListBox with empty state template
  </verify>
  <done>
    MainWindow.xaml has Computers panel with filter UI controls (status ComboBox, search TextBox, clear button), filter count text, virtualized ListBox with ComputerInfo data template showing Hostname, IpAddress, Status (color-coded), LastSync, PendingUpdates, OsVersion, empty state template with "No items match your current filters" message, and proper binding to all ViewModel properties.
  </done>
</task>

<task type="auto">
  <name>Restore saved filters on startup</name>
  <files>
    src/WsusManager.App/ViewModels/MainViewModel.cs
  </files>
  <action>
    Update the MainViewModel constructor or InitializeAsync method to restore saved filters:

    Add to MainViewModel.cs (in the constructor or after settings are loaded):

    ```csharp
    private async Task InitializeFiltersAsync()
    {
        var settings = _settingsService.GetSettings();

        // Restore Computers filters
        ComputerStatusFilter = settings.ComputerStatusFilter ?? "All";
        ComputerSearchText = settings.ComputerSearchText ?? string.Empty;

        await Task.CompletedTask.ConfigureAwait(false);
    }
    ```

    Call this from the existing InitializeAsync method or create one if it doesn't exist:

    ```csharp
    public async Task InitializeAsync()
    {
        if (_isInitialized) return;

        // ... existing initialization ...

        await InitializeFiltersAsync().ConfigureAwait(false);

        _isInitialized = true;
    }
    ```

    DO NOT: Apply filters before data is loaded - LoadComputersAsync should call ApplyComputerFilters after populating the collection
  </action>
  <verify>
    dotnet build src/WsusManager.App succeeds
  </verify>
  <done>
    InitializeFiltersAsync method restores ComputerStatusFilter and ComputerSearchText from AppSettings on startup. Called from InitializeAsync with proper null coalescing defaults.
  </done>
</task>

<task type="auto">
  <name>Add unit tests for filter logic</name>
  <files>
    src/WsusManager.Tests/ViewModels/MainViewModelTests.cs
  </files>
  <action>
    Add unit tests for the filter logic to src/WsusManager.Tests/ViewModels/MainViewModelTests.cs:

    ```csharp
    [Fact]
    public void ComputerStatusFilter_WhenChanged_AppliesFilter()
    {
        // Arrange
        var viewModel = _serviceProvider.GetRequiredService<MainViewModel>();
        viewModel.FilteredComputers.Add(new ComputerInfo(
            "PC001", "192.168.1.10", "Online", DateTime.Now, 0, "Windows 11"));
        viewModel.FilteredComputers.Add(new ComputerInfo(
            "PC002", "192.168.1.11", "Offline", DateTime.Now.AddHours(-2), 5, "Windows 10"));

        // Act
        viewModel.ComputerStatusFilter = "Online";

        // Assert
        var view = CollectionViewSource.GetDefaultView(viewModel.FilteredComputers);
        view.Refresh();
        Assert.Single(viewModel.FilteredComputers);
        Assert.Equal("PC001", viewModel.FilteredComputers.First().Hostname);
    }

    [Fact]
    public void ComputerSearchText_WhenChanged_AppliesFilterAfterDebounce()
    {
        // Arrange
        var viewModel = _serviceProvider.GetRequiredService<MainViewModel>();
        viewModel.FilteredComputers.Add(new ComputerInfo(
            "LAB-PC001", "192.168.1.10", "Online", DateTime.Now, 0, "Windows 11"));
        viewModel.FilteredComputers.Add(new ComputerInfo(
            "SRV-001", "192.168.1.5", "Online", DateTime.Now, 0, "Windows Server"));

        // Act
        viewModel.ComputerSearchText = "LAB";
        // Wait for debounce timer
        Thread.Sleep(350);

        // Assert
        Assert.Single(viewModel.FilteredComputers);
        Assert.Contains("LAB", viewModel.FilteredComputers.First().Hostname);
    }

    [Fact]
    public void ClearComputerFiltersCommand_WhenExecuted_ResetsAllFilters()
    {
        // Arrange
        var viewModel = _serviceProvider.GetRequiredService<MainViewModel>();
        viewModel.FilteredComputers.Add(new ComputerInfo(
            "PC001", "192.168.1.10", "Online", DateTime.Now, 0, "Windows 11"));
        viewModel.ComputerStatusFilter = "Online";
        viewModel.ComputerSearchText = "PC";

        // Act
        viewModel.ClearComputerFiltersCommand.Execute(null);

        // Assert
        Assert.Equal("All", viewModel.ComputerStatusFilter);
        Assert.Empty(viewModel.ComputerSearchText);
    }

    [Fact]
    public void ShowClearComputerFilters_WhenAnyFilterActive_ReturnsTrue()
    {
        // Arrange
        var viewModel = _serviceProvider.GetRequiredService<MainViewModel>();

        // Act & Assert - Status filter
        viewModel.ComputerStatusFilter = "Online";
        Assert.True(viewModel.ShowClearComputerFilters);

        // Act & Assert - Search filter
        viewModel.ComputerStatusFilter = "All";
        viewModel.ComputerSearchText = "test";
        Assert.True(viewModel.ShowClearComputerFilters);

        // Act & Assert - Both filters reset
        viewModel.ComputerStatusFilter = "All";
        viewModel.ComputerSearchText = "";
        Assert.False(viewModel.ShowClearComputerFilters);
    }
    ```

    DO NOT: Test LoadComputersAsync - that's in a later phase
  </action>
  <verify>
    dotnet test src/WsusManager.Tests --filter "FullyQualifiedName~Computer" passes
    dotnet test src/WsusManager.Tests passes all tests
  </verify>
  <done>
    MainViewModelTests.cs has 4 new tests: ComputerStatusFilter_WhenChanged_AppliesFilter, ComputerSearchText_WhenChanged_AppliesFilterAfterDebounce, ClearComputerFiltersCommand_WhenExecuted_ResetsAllFilters, and ShowClearComputerFilters_WhenAnyFilterActive_ReturnsTrue. All tests pass and verify filter logic, debounce behavior, clear functionality, and visibility conditions.
  </done>
</task>

</tasks>

<verification>
1. Build succeeds: dotnet build src/WsusManager.App
2. Build succeeds: dotnet build src/WsusManager.Core
3. Tests pass: dotnet test src/WsusManager.Tests
4. SharedStyles.xaml has FilterRow, FilterComboBox, FilterSearchBox, ClearFiltersButton, EmptyStateText styles
5. AppSettings.cs has ComputerStatusFilter and ComputerSearchText properties
6. MainViewModel has ComputerStatusFilter, ComputerSearchText properties with OnChanged handlers
7. MainViewModel has _computerSearchDebounceTimer with 300ms interval
8. MainViewModel has ApplyComputerFilters method with CollectionView.Filter logic
9. MainViewModel has ClearComputerFiltersCommand
10. MainWindow.xaml has Computers panel with filter UI (status ComboBox + search TextBox + clear button)
11. MainWindow.xaml has virtualized ListBox with ComputerInfo data template
12. MainWindow.xaml has empty state template when FilteredComputers.Count is 0
13. Filters restore from AppSettings on startup via InitializeFiltersAsync
14. ShowClearComputerFilters returns true when any filter is active
15. Unit tests cover filter logic, debounce, clear, and visibility
</verification>

<success_criteria>
DAT-01: Computers panel has status filter (All/Online/Offline/Error) and real-time search with 300ms debounce. Filters use CollectionView for efficient O(n) filtering. Empty state shows when no items match. Clear button appears only when filters are active. Filters persist to AppSettings and restore on startup.
</success_criteria>

<output>
After completion, create `.planning/phases/29-data-filtering/29-01-SUMMARY.md`
</output>
