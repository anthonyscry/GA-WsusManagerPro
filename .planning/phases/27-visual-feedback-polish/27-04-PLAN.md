---
phase: 27-visual-feedback-polish
plan: 04
type: execute
wave: 1
depends_on: []
files_modified:
  - src/WsusManager.App/ViewModels/MainViewModel.cs
  - src/WsusManager.App/Views/MainWindow.xaml
autonomous: true
requirements:
  - UX-09

must_haves:
  truths:
    - "Success messages use checkmark icon (✓) and TextSecondary color"
    - "Failure messages use cross mark icon (✗) and TextError (red) color"
    - "Warning/cancel messages use warning icon (⚠) and orange color"
    - "Success/failure banners display in log output panel"
    - "Consistent iconography used across all operations"
  artifacts:
    - path: "src/WsusManager.App/ViewModels/MainViewModel.cs"
      provides: "Banner formatting with icons and colors"
      exports: ["StatusBannerText", "StatusBannerColor"]
    - path: "src/WsusManager.App/Views/MainWindow.xaml"
      provides: "Banner display in log panel"
      contains: "Border.*StatusBanner"
  key_links:
    - from: "RunOperationAsync completion"
      to: "StatusBannerText/StatusBannerColor"
      via: "Property assignment in try/catch/cancel blocks"
      pattern: "StatusBannerText.*completed|StatusBannerText.*failed"
---

<objective>
Implement consistent success/failure banners with checkmark/cross icons and appropriate colors for all operation outcomes.

Purpose: Visual consistency helps users quickly recognize operation outcomes. Icons provide immediate visual cue before reading text, reducing cognitive load.

Output: Success banners show "✓ [Operation] completed" in green, failure banners show "✗ [Operation] failed" in red, warnings show "⚠ [Operation] cancelled" in orange.
</objective>

<execution_context>
@/home/anthonyscry/.claude/get-shit-done/workflows/execute-plan.md
@/home/anthonyscry/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/STATE.md
@.planning/phases/27-visual-feedback-polish/27-CONTEXT.md
@src/WsusManager.App/ViewModels/MainViewModel.cs
@src/WsusManager.App/Views/MainWindow.xaml
</context>

<tasks>

<task type="auto">
  <name>Update success/failure banner formatting in MainViewModel with icons</name>
  <files>src/WsusManager.App/ViewModels/MainViewModel.cs</files>
  <action>
    Update RunOperationAsync to include icons in banner messages:

    1. In RunOperationAsync (around line 374-376), find success banner assignment:
       ```csharp
       StatusBannerText = $"{operationName} completed successfully.";
       ```
       Change to:
       ```csharp
       StatusBannerText = $"✓ {operationName} completed successfully.";
       ```

    2. In failure block (around line 382-385):
       ```csharp
       StatusBannerText = $"{operationName} failed.";
       ```
       Change to:
       ```csharp
       StatusBannerText = $"✗ {operationName} failed.";
       ```

    3. In cancelled block (around line 393-395):
       ```csharp
       StatusBannerText = $"{operationName} cancelled.";
       ```
       Change to:
       ```csharp
       StatusBannerText = $"⚠ {operationName} cancelled.";
       ```

    4. In exception block (around line 402-405):
       ```csharp
       StatusBannerText = $"{operationName} failed.";
       ```
       Change to:
       ```csharp
       StatusBannerText = $"✗ {operationName} failed.";
       ```

    5. Verify StatusBannerColor assignments are correct:
       - Success: Color.FromRgb(0x3F, 0xB9, 0x50) (green) — already set
       - Failure: Color.FromRgb(0xF8, 0x51, 0x49) (red) — already set
       - Cancel: Color.FromRgb(0xD2, 0x99, 0x22) (orange) — already set

    DO NOT: Add new properties — reuse existing StatusBannerText and StatusBannerColor
  </action>
  <verify>
    dotnet build src/WsusManager.App/WsusManager.App.csproj succeeds, banner messages include icons
  </verify>
  <done>
    All operation outcomes include appropriate icons (✓ for success, ✗ for failure, ⚠ for cancel) in StatusBannerText
  </done>
</task>

<task type="auto">
  <name>Add banner display in log panel area of MainWindow.xaml</name>
  <files>src/WsusManager.App/Views/MainWindow.xaml</files>
  <action>
    Verify status banner is visible in log panel output (may already exist):

    1. Search for existing banner display in MainWindow.xaml (grep for "StatusBanner")
    2. If banner already exists in log panel (around line 700+ in log output area), verify binding is correct
    3. If no banner exists, add to log panel header:
       ```xml
       <!-- Status Banner (shown after operation completes) -->
       <Border Background="{Binding StatusBannerColor, TargetNullValue={DynamicResource CardBackground}}"
               Visibility="{Binding StatusBannerVisibility}"
               Padding="12,8" Margin="0,0,0,8" CornerRadius="4">
           <TextBlock Text="{Binding StatusBannerText}"
                      Foreground="{DynamicResource TextPrimary}"
                      FontSize="13" FontWeight="Medium"
                      TextWrapping="Wrap"/>
       </Border>
       ```

    4. Verify StatusBannerVisibility property (line 308-309) controls display correctly

    DO NOT: Add separate notification overlay — use log panel area for banner display per CONTEXT.md decision
  </action>
  <verify>
    dotnet build src/WsusManager.App/WsusManager.App.csproj succeeds, banner appears in log panel area
  </verify>
  <done>
    Status banner with icon and color appears in log panel area after operation completes, disappears on next operation start
  </done>
</task>

<task type="auto">
  <name>Verify log panel success/failure messages include icons for consistency</name>
  <files>src/WsusManager.App/ViewModels/MainViewModel.cs</files>
  <action>
    Update log output messages to match banner iconography:

    1. In RunOperationAsync, find log output lines (around line 377, 385, 396, 405):
       ```csharp
       AppendLog($"=== {operationName} completed ===");
       AppendLog($"=== {operationName} FAILED ===");
       AppendLog($"=== {operationName} CANCELLED ===");
       ```

    2. Add icons to match banner:
       ```csharp
       AppendLog($"=== ✓ {operationName} completed ===");
       AppendLog($"=== ✗ {operationName} FAILED ===");
       AppendLog($"=== ⚠ {operationName} CANCELLED ===");
       ```

    3. This ensures log panel output matches banner formatting for consistency

    DO NOT: Change existing progress report format — only update completion summary lines
  </action>
  <verify>
    dotnet build src/WsusManager.App/WsusManager.App.csproj succeeds, log messages include icons
  </verify>
  <done>
    Log panel completion messages use same icons as banner (✓, ✗, ⚠) for visual consistency
  </done>
</task>

</tasks>

<verification>
1. Build succeeds: dotnet build src/WsusManager.App
2. Success banner shows "✓ [Operation] completed" in green
3. Failure banner shows "✗ [Operation] failed" in red
4. Cancelled banner shows "⚠ [Operation] cancelled" in orange
5. Banner appears in log panel area
6. Log output messages match banner iconography
</verification>

<success_criteria>
Success/failure banners use consistent iconography and colors across all operations. Users see immediate visual feedback with ✓ (green), ✗ (red), or ⚠ (orange) icons in both the status banner and log panel output.
</success_criteria>

<output>
After completion, create `.planning/phases/27-visual-feedback-polish/27-04-SUMMARY.md`
</output>
