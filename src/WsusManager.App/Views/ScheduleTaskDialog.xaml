<Window x:Class="WsusManager.App.Views.ScheduleTaskDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:automation="clr-namespace:System.Windows.Automation;assembly=PresentationCore"
        Title="Schedule Maintenance Task"
        Width="520" Height="600"
        WindowStartupLocation="CenterOwner"
        ResizeMode="NoResize"
        Background="{DynamicResource PrimaryBackground}"
        automation:AutomationProperties.AutomationId="ScheduleTaskDialog">

    <Grid Margin="24" KeyboardNavigation.TabNavigation="Continue">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <StackPanel Grid.Row="0" Margin="0,0,0,16">
            <TextBlock Text="Schedule Task" FontSize="16" FontWeight="SemiBold"
                       Foreground="{DynamicResource TextPrimary}"/>
            <TextBlock Text="Create a Windows scheduled task for automated WSUS maintenance."
                       Foreground="{DynamicResource TextSecondary}" FontSize="12" Margin="0,4,0,0"/>
        </StackPanel>

        <!-- Fields -->
        <StackPanel Grid.Row="1">

            <!-- Task Name -->
            <TextBlock Text="Task Name" Foreground="{DynamicResource TextSecondary}"
                       FontSize="12" Margin="0,0,0,4"/>
            <TextBox x:Name="TxtTaskName" Text="WSUS Monthly Maintenance"
                     automation:AutomationProperties.AutomationId="TaskNameTextBox"
                     Background="{DynamicResource InputBackground}" Foreground="{DynamicResource TextPrimary}"
                     BorderBrush="{DynamicResource BorderPrimary}" Padding="6,4" FontSize="12"
                     Margin="0,0,0,10"
                     TextChanged="Input_Changed"/>

            <!-- Schedule Type and Time on same row -->
            <Grid Margin="0,0,0,10">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="12"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                <StackPanel Grid.Column="0">
                    <TextBlock Text="Schedule" Foreground="{DynamicResource TextSecondary}"
                               FontSize="12" Margin="0,0,0,4"/>
                    <ComboBox x:Name="CmbScheduleType" SelectedIndex="0"
                              automation:AutomationProperties.AutomationId="ScheduleTypeComboBox"
                              Background="{DynamicResource InputBackground}" Foreground="{DynamicResource TextPrimary}"
                              FontSize="12" Padding="4"
                              SelectionChanged="ScheduleType_Changed">
                        <ComboBoxItem Content="Monthly"/>
                        <ComboBoxItem Content="Weekly"/>
                        <ComboBoxItem Content="Daily"/>
                    </ComboBox>
                </StackPanel>
                <StackPanel Grid.Column="2">
                    <TextBlock Text="Time (HH:mm)" Foreground="{DynamicResource TextSecondary}"
                               FontSize="12" Margin="0,0,0,4"/>
                    <TextBox x:Name="TxtTime" Text="02:00"
                             automation:AutomationProperties.AutomationId="TimeTextBox"
                             Background="{DynamicResource InputBackground}" Foreground="{DynamicResource TextPrimary}"
                             BorderBrush="{DynamicResource BorderPrimary}" Padding="6,4" FontSize="12"
                             TextChanged="Input_Changed"/>
                </StackPanel>
            </Grid>

            <!-- Day of Month (visible when Monthly) -->
            <StackPanel x:Name="DayOfMonthPanel" Margin="0,0,0,10">
                <TextBlock Text="Day of Month (1-31)" Foreground="{DynamicResource TextSecondary}"
                           FontSize="12" Margin="0,0,0,4"/>
                <TextBox x:Name="TxtDayOfMonth" Text="15" Width="80" HorizontalAlignment="Left"
                         automation:AutomationProperties.AutomationId="DayOfMonthNumericUpDown"
                         Background="{DynamicResource InputBackground}" Foreground="{DynamicResource TextPrimary}"
                         BorderBrush="{DynamicResource BorderPrimary}" Padding="6,4" FontSize="12"
                         TextChanged="Input_Changed"/>
            </StackPanel>

            <!-- Day of Week (visible when Weekly) -->
            <StackPanel x:Name="DayOfWeekPanel" Visibility="Collapsed" Margin="0,0,0,10">
                <TextBlock Text="Day of Week" Foreground="{DynamicResource TextSecondary}"
                           FontSize="12" Margin="0,0,0,4"/>
                <ComboBox x:Name="CmbDayOfWeek" SelectedIndex="6"
                          automation:AutomationProperties.AutomationId="DayOfWeekComboBox"
                          Background="{DynamicResource InputBackground}" Foreground="{DynamicResource TextPrimary}"
                          FontSize="12" Padding="4">
                    <ComboBoxItem Content="Sunday"/>
                    <ComboBoxItem Content="Monday"/>
                    <ComboBoxItem Content="Tuesday"/>
                    <ComboBoxItem Content="Wednesday"/>
                    <ComboBoxItem Content="Thursday"/>
                    <ComboBoxItem Content="Friday"/>
                    <ComboBoxItem Content="Saturday"/>
                </ComboBox>
            </StackPanel>

            <!-- Maintenance Profile -->
            <TextBlock Text="Maintenance Profile" Foreground="{DynamicResource TextSecondary}"
                       FontSize="12" Margin="0,0,0,4"/>
            <ComboBox x:Name="CmbProfile" SelectedIndex="0"
                      automation:AutomationProperties.AutomationId="ScheduleProfileComboBox"
                      Background="{DynamicResource InputBackground}" Foreground="{DynamicResource TextPrimary}"
                      FontSize="12" Padding="4" Margin="0,0,0,10">
                <ComboBoxItem Content="Full"/>
                <ComboBoxItem Content="Quick"/>
                <ComboBoxItem Content="SyncOnly"/>
            </ComboBox>

            <!-- Username -->
            <TextBlock Text="Username" Foreground="{DynamicResource TextSecondary}"
                       FontSize="12" Margin="0,0,0,4"/>
            <TextBox x:Name="TxtUsername" Text=".\dod_admin"
                     automation:AutomationProperties.AutomationId="ScheduleUsernameTextBox"
                     Background="{DynamicResource InputBackground}" Foreground="{DynamicResource TextPrimary}"
                     BorderBrush="{DynamicResource BorderPrimary}" Padding="6,4" FontSize="12"
                     Margin="0,0,0,10"/>

            <!-- Password -->
            <TextBlock Text="Password" Foreground="{DynamicResource TextSecondary}"
                       FontSize="12" Margin="0,0,0,4"/>
            <PasswordBox x:Name="PwdPassword"
                         automation:AutomationProperties.AutomationId="SchedulePasswordBox"
                         Background="{DynamicResource InputBackground}" Foreground="{DynamicResource TextPrimary}"
                         BorderBrush="{DynamicResource BorderPrimary}" Padding="6,4" FontSize="12"
                         PasswordChanged="Input_Changed"/>
        </StackPanel>

        <!-- Validation Text -->
        <TextBlock x:Name="TxtValidation" Grid.Row="2"
                   Foreground="{DynamicResource StatusError}" FontSize="11" Margin="0,4,0,0"
                   Text="Task name, valid time, and password are required."/>

        <!-- Buttons -->
        <StackPanel Grid.Row="3" Orientation="Horizontal" HorizontalAlignment="Right"
                    Margin="0,16,0,0">
            <Button Content="Cancel" Style="{StaticResource BtnSec}"
                    automation:AutomationProperties.AutomationId="CancelScheduleButton"
                    Padding="20,8" Margin="0,0,8,0"
                    Click="Cancel_Click"/>
            <Button x:Name="BtnCreate" Content="Create Task" Style="{StaticResource BtnGreen}"
                    automation:AutomationProperties.AutomationId="CreateScheduleButton"
                    Padding="20,8" IsEnabled="False"
                    Click="Ok_Click"/>
        </StackPanel>
    </Grid>
</Window>
